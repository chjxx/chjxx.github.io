(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/e88":function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"01mT":function(t,e,n){"use strict";n.r(e);var i=n("0Er8"),s=n("sV1t"),a=n("GGrR"),o={name:"SignIn",data:function(){return{state:"finish"}},computed:{isLoading:function(){return"loading"===this.state},isFinish:function(){return"finish"===this.state}},methods:{showMsg:function(t){this.$emit("message",t)},cleanMsg:function(){this.$emit("message","")},signin:function(){var t=this;this.cleanMsg();var e=new FormData(this.$refs.form),n=Object(s.a)(e);Object(a.h)(n,"Error")?this.showMsg(n.message):(this.state="loading",this.$api.users.signInByAdmin(e).then((function(e){t.state="finish",i.a.show(),t.$router.push("/admin")})).catch((function(e){t.state="finish",t.showMsg(e.message)})))}}},r=n("KHd+"),c=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",staticClass:"m-form-signcard",on:{submit:function(e){return e.preventDefault(),t.signin(e)}}},[t._m(0),t._v(" "),t._m(1),t._v(" "),n("ButtonState",{staticClass:"submit",attrs:{state:t.state}},[t._v("登陆")])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"text-item"},[e("input",{staticClass:"u-ipt-text1",attrs:{name:"name",type:"text",autocomplete:"off",placeholder:"用户名"}}),this._v(" "),e("i",{staticClass:"icon iconuser"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"text-item"},[e("input",{staticClass:"u-ipt-text1",attrs:{name:"password",type:"password",placeholder:"密码"}}),this._v(" "),e("i",{staticClass:"icon iconlock"})])}],!1,null,null,null).exports,h=(n("KKXr"),n("i8aV")),l={name:"SignIn",data:function(){return{state:"finish",avatarUrl:""}},computed:{isLoading:function(){return"loading"===this.state},isFinish:function(){return"finish"===this.state},avatarCSSVal:function(){return"url(".concat(this.avatarUrl,")")}},methods:{test:function(){this.$emit("switch","SignIn")},showMsg:function(t){this.$emit("message",t)},cleanMsg:function(){this.$emit("message","")},signup:function(){var t=this;this.cleanMsg();var e=new FormData(this.$refs.form),n=Object(s.a)(e);Object(a.h)(n,"Error")?this.showMsg(n.message):Object(h.a)(this.$refs.avatar.files[0],{eWidth:300,eHeight:300,size:"cut",position:{x:"center",y:"middle"}}).then((function(n){t.state="loading",e.set("avatar",n,"avatar.".concat(n.type.split("/").pop())),t.$api.users.signUpByAdmin(e).then((function(e){t.state="finish",t.$emit("switch","SignIn"),t.$emit("message","注册成功，请登陆！")})).catch((function(e){t.state="finish",t.showMsg(e.message)}))}))},changeAvatar:function(){this.avatarUrl=window.URL.createObjectURL(this.$refs.avatar.files[0])}}},u={name:"Sign",components:{SignIn:c,SignUp:Object(r.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{ref:"form",staticClass:"m-form-signcard",on:{submit:function(e){return e.preventDefault(),t.signup(e)}}},[n("label",{staticClass:"avatar-item"},[n("div",{staticClass:"preview",style:{backgroundImage:t.avatarCSSVal}}),t._v(" "),n("input",{ref:"avatar",attrs:{name:"avatar",type:"file",accept:"image/*"},on:{change:t.changeAvatar}}),t._v(" "),n("i",{staticClass:"icon iconplus"})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),n("ButtonState",{staticClass:"submit",attrs:{state:t.state}},[t._v("注册")])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"text-item"},[e("input",{staticClass:"u-ipt-text1",attrs:{type:"text",name:"name",autocomplete:"off",placeholder:"用户名"}}),this._v(" "),e("i",{staticClass:"icon iconuser"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"text-item"},[e("input",{staticClass:"u-ipt-text1",attrs:{type:"email",name:"email",autocomplete:"off",placeholder:"邮箱"}}),this._v(" "),e("i",{staticClass:"icon iconemail"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"text-item"},[e("input",{staticClass:"u-ipt-text1",attrs:{name:"password",type:"password",placeholder:"密码"}}),this._v(" "),e("i",{staticClass:"icon iconlock"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"text-item"},[e("input",{staticClass:"u-ipt-text1",attrs:{name:"confirmpassword",type:"password",placeholder:"确认密码"}}),this._v(" "),e("i",{staticClass:"icon iconlock"})])}],!1,null,null,null).exports},data:function(){return{curComponent:"SignIn",componentMsg:"",components:{SignIn:{name:"SignIn",title:"登陆后台"},SignUp:{name:"SignUp",title:"注册账号"}}}},computed:{componentTitle:function(){return this.components[this.curComponent].title}},methods:{isComponent:function(t){return this.curComponent===t},cleanComponentMsg:function(){this.componentMsg=""},showComponentMsg:function(t){this.componentMsg=t},switchToComponent:function(t){this.cleanComponentMsg(),this.curComponent=t}}},m=(n("FJcc"),Object(r.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"sign"}},[n("div",{staticClass:"sign-ctnr"},[n("p",{staticClass:"component-tt"},[t._v(t._s(t.componentTitle))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.componentMsg,expression:"componentMsg"}],staticClass:"component-msg"},[t._v(t._s(t.componentMsg)),n("i",{staticClass:"icon iconclose btn-close",on:{click:t.cleanComponentMsg}})]),t._v(" "),n("keep-alive",[n("div",{staticClass:"component-body"},[n(t.curComponent,{tag:"component",on:{message:t.showComponentMsg,switch:t.switchToComponent}})],1)]),t._v(" "),n("div",{staticClass:"component-tip"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isComponent("SignUp"),expression:"isComponent('SignUp')"}]},[t._v("已有账号，去"),n("a",{on:{click:function(e){return t.switchToComponent("SignIn")}}},[t._v("登陆")])]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.isComponent("SignIn"),expression:"isComponent('SignIn')"}]},[t._v("没有账号，去"),n("a",{on:{click:function(e){return t.switchToComponent("SignUp")}}},[t._v("注册")])])])],1)])}),[],!1,null,null,null));e.default=m.exports},FJcc:function(t,e,n){"use strict";var i=n("gdeN");n.n(i).a},Tze0:function(t,e,n){"use strict";n("qncB")("trim",(function(t){return function(){return t(this,3)}}))},gdeN:function(t,e,n){},i8aV:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));n("VRzm");var i=n("GGrR"),s="stretch",a="limit",o="cut",r="left",c="center",h="right",l="top",u="middle",m="bottom";function f(t,e){var n;return i.c.isType(t,"File")&&((n=document.createElement("img")).src=URL.createObjectURL(t)),(e=e||{}).eWidth=e.eWidth||300,e.eHeight=e.eHeight||300,e.size=e.size||s,e.position=e.position||{x:r,y:l},new Promise((function(i,s){n.onload=function(){var t=function(t,e){var n={},i=t.width,s=t.height;if(e.size===a)e.eWidth/e.eHeight>i/s?(n.height=e.eHeight,n.width=i/s*n.height):(n.width=e.eWidth,n.height=s/i*n.width),n.sx=0,n.sy=0,n.sWidth=i,n.sHeight=s;else if(e.size===o)if(n.width=e.eWidth,n.height=e.eHeight,e.eWidth/e.eHeight>i/s){var r=e.eHeight/e.eWidth*i;if(n.sx=0,n.sWidth=i,n.sHeight=r,e.position.y===u){var l=Math.floor((s-r)/2);n.sy=l}else if(e.position.y===m){var f=s-r;n.sy=f}else n.sy=0}else{var p=e.eWidth/e.eHeight*s;if(n.sy=0,n.sWidth=p,n.sHeight=s,e.position.x===c){var g=Math.floor((i-p)/2);n.sx=g}else if(e.position.x===h){var d=i-p;n.sx=d}else n.sx=0}else n.width=e.eWidth,n.height=e.eHeight,n.sx=0,n.sy=0,n.sWidth=i,n.sHeight=s;return n.dx=0,n.dy=0,n.dWidth=n.width,n.dHeight=n.height,n}(n,e),s=t.width,r=t.height,l=t.sx,f=t.sy,p=t.sWidth,g=t.sHeight,d=t.dx,v=t.dy,w=t.dWidth,_=t.dHeight,C=document.createElement("canvas"),x=C.getContext("2d");C.width=s,C.height=r,x.drawImage(n,l,f,p,g,d,v,w,_),C.toBlob(i)},n.src=URL.createObjectURL(t)}))}},qncB:function(t,e,n){var i=n("XKFU"),s=n("vhPU"),a=n("eeVq"),o=n("/e88"),r="["+o+"]",c=RegExp("^"+r+r+"*"),h=RegExp(r+r+"*$"),l=function(t,e,n){var s={},r=a((function(){return!!o[t]()||"​"!="​"[t]()})),c=s[t]=r?e(u):o[t];n&&(s[n]=c),i(i.P+i.F*r,"String",s)},u=l.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(h,"")),t};t.exports=l},sV1t:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f}));n("Tze0"),n("rE2o"),n("ioFf"),n("rGqo"),n("yt8O"),n("f3/d");function i(t){if(!/^[a-zA-Z][\w]{4,11}$/.test(t))throw new Error("用户名需为 5－12 个大小写字母、数字、下划线(_)组成！")}function s(t){if(!/^[\w]+@[\w]+\.[\w]+$/.test(t))throw new Error("邮箱格式有误！")}function a(t){if(""===t.name)throw new Error("需选择头像！")}function o(t){if(!/^[\w]{6,20}$/.test(t))throw new Error("用户密码需为 6－20 个大小写字母、数字、下划线(_)、英文句号(.)组成！")}function r(t){if(t.get("password")===t.get("newpassword"))throw new Error("新密码不能与旧密码相同!")}function c(t){if(t.get("password")!==t.get("confirmpassword"))throw new Error("两次密码输入不一致！")}function h(t){var e=t.entries();try{var n=!0,h=!1,l=void 0;try{for(var u,m=e[Symbol.iterator]();!(n=(u=m.next()).done);n=!0){var f=u.value;switch(f[0]){case"name":i(f[1]);break;case"email":s(f[1]);break;case"avatar":a(f[1]);break;case"password":o(f[1]);break;case"newpassword":r(t);break;case"confirmpassword":c(t)}}}catch(t){h=!0,l=t}finally{try{n||null==m.return||m.return()}finally{if(h)throw l}}}catch(t){return t}}function l(t){if(t.trim().length<6)throw new Error("文章标题至少6个字符以上")}function u(t){if(!/^[\w]*$/.test(t))throw new Error("命名链接只能包含字母、数字及下划线")}function m(t){if(t.trim().length<10)throw new Error("文章内容至少10个字符以上")}function f(t){var e=t.entries();try{var n=!0,i=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var r=a.value;switch(r[0]){case"title":l(r[1]);break;case"namedLink":u(r[1]);break;case"content":m(r[1])}}}catch(t){i=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw s}}}catch(t){return t}}}}]);
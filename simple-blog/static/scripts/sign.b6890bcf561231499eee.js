(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/e88":function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"01mT":function(t,n,e){"use strict";e.r(n);var s=e("0Er8"),i=e("sV1t"),a=e("GGrR"),o={name:"SignIn",data:function(){return{state:"finish"}},computed:{isLoading:function(){return"loading"===this.state},isFinish:function(){return"finish"===this.state}},methods:{showMsg:function(t){this.$emit("message",t)},cleanMsg:function(){this.$emit("message","")},signin:function(){var t=this;this.cleanMsg();var n=new FormData(this.$refs.form),e=Object(i.a)(n);Object(a.h)(e,"Error")?this.showMsg(e.message):(this.state="loading",this.$api.users.signInByAdmin(n).then((function(n){t.state="finish",s.a.show(),t.$router.push("/admin")})).catch((function(n){t.state="finish",t.showMsg(n.message)})))}}},r=e("KHd+"),c=Object(r.a)(o,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("form",{ref:"form",staticClass:"m-form-signcard",on:{submit:function(n){return n.preventDefault(),t.signin(n)}}},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("ButtonState",{staticClass:"submit",attrs:{state:t.state}},[t._v("登陆")])],1)}),[function(){var t=this.$createElement,n=this._self._c||t;return n("label",{staticClass:"text-item"},[n("input",{staticClass:"u-ipt-text1",attrs:{name:"name",type:"text",autocomplete:"off",placeholder:"用户名"}}),this._v(" "),n("i",{staticClass:"icon iconuser"})])},function(){var t=this.$createElement,n=this._self._c||t;return n("label",{staticClass:"text-item"},[n("input",{staticClass:"u-ipt-text1",attrs:{name:"password",type:"password",placeholder:"密码"}}),this._v(" "),n("i",{staticClass:"icon iconlock"})])}],!1,null,null,null).exports,u={name:"SignIn",data:function(){return{state:"finish",avatarUrl:""}},computed:{isLoading:function(){return"loading"===this.state},isFinish:function(){return"finish"===this.state},avatarCSSVal:function(){return"url(".concat(this.avatarUrl,")")}},methods:{test:function(){this.$emit("switch","SignIn")},showMsg:function(t){this.$emit("message",t)},cleanMsg:function(){this.$emit("message","")},signup:function(){var t=this;this.cleanMsg();var n=new FormData(this.$refs.form),e=Object(i.a)(n);Object(a.h)(e,"Error")?this.showMsg(e.message):(this.state="loading",this.$api.users.signUpByAdmin(n).then((function(n){t.state="finish",t.$emit("switch","SignIn"),t.$emit("message","注册成功，请登陆！")})).catch((function(n){t.state="finish",t.showMsg(n.message)})))},changeAvatar:function(){this.avatarUrl=window.URL.createObjectURL(this.$refs.avatar.files[0])}}},l={name:"Sign",components:{SignIn:c,SignUp:Object(r.a)(u,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("form",{ref:"form",staticClass:"m-form-signcard",on:{submit:function(n){return n.preventDefault(),t.signup(n)}}},[e("label",{staticClass:"avatar-item"},[e("div",{staticClass:"preview",style:{backgroundImage:t.avatarCSSVal}}),t._v(" "),e("input",{ref:"avatar",attrs:{name:"avatar",type:"file",accept:"image/*"},on:{change:t.changeAvatar}}),t._v(" "),e("i",{staticClass:"icon iconplus"})]),t._v(" "),t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("ButtonState",{staticClass:"submit",attrs:{state:t.state}},[t._v("注册")])],1)}),[function(){var t=this.$createElement,n=this._self._c||t;return n("label",{staticClass:"text-item"},[n("input",{staticClass:"u-ipt-text1",attrs:{type:"text",name:"name",autocomplete:"off",placeholder:"用户名"}}),this._v(" "),n("i",{staticClass:"icon iconuser"})])},function(){var t=this.$createElement,n=this._self._c||t;return n("label",{staticClass:"text-item"},[n("input",{staticClass:"u-ipt-text1",attrs:{type:"email",name:"email",autocomplete:"off",placeholder:"邮箱"}}),this._v(" "),n("i",{staticClass:"icon iconemail"})])},function(){var t=this.$createElement,n=this._self._c||t;return n("label",{staticClass:"text-item"},[n("input",{staticClass:"u-ipt-text1",attrs:{name:"password",type:"password",placeholder:"密码"}}),this._v(" "),n("i",{staticClass:"icon iconlock"})])},function(){var t=this.$createElement,n=this._self._c||t;return n("label",{staticClass:"text-item"},[n("input",{staticClass:"u-ipt-text1",attrs:{name:"confirmpassword",type:"password",placeholder:"确认密码"}}),this._v(" "),n("i",{staticClass:"icon iconlock"})])}],!1,null,null,null).exports},data:function(){return{curComponent:"SignIn",componentMsg:"",components:{SignIn:{name:"SignIn",title:"登陆后台"},SignUp:{name:"SignUp",title:"注册账号"}}}},computed:{componentTitle:function(){return this.components[this.curComponent].title}},methods:{isComponent:function(t){return this.curComponent===t},cleanComponentMsg:function(){this.componentMsg=""},showComponentMsg:function(t){this.componentMsg=t},switchToComponent:function(t){this.cleanComponentMsg(),this.curComponent=t}}},m=(e("FJcc"),Object(r.a)(l,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"sign"}},[e("div",{staticClass:"sign-ctnr"},[e("p",{staticClass:"component-tt"},[t._v(t._s(t.componentTitle))]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.componentMsg,expression:"componentMsg"}],staticClass:"component-msg"},[t._v(t._s(t.componentMsg)),e("i",{staticClass:"icon iconclose btn-close",on:{click:t.cleanComponentMsg}})]),t._v(" "),e("keep-alive",[e("div",{staticClass:"component-body"},[e(t.curComponent,{tag:"component",on:{message:t.showComponentMsg,switch:t.switchToComponent}})],1)]),t._v(" "),e("div",{staticClass:"component-tip"},[e("span",{directives:[{name:"show",rawName:"v-show",value:t.isComponent("SignUp"),expression:"isComponent('SignUp')"}]},[t._v("已有账号，去"),e("a",{on:{click:function(n){return t.switchToComponent("SignIn")}}},[t._v("登陆")])]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:t.isComponent("SignIn"),expression:"isComponent('SignIn')"}]},[t._v("没有账号，去"),e("a",{on:{click:function(n){return t.switchToComponent("SignUp")}}},[t._v("注册")])])])],1)])}),[],!1,null,null,null));n.default=m.exports},FJcc:function(t,n,e){"use strict";var s=e("gdeN");e.n(s).a},Tze0:function(t,n,e){"use strict";e("qncB")("trim",(function(t){return function(){return t(this,3)}}))},gdeN:function(t,n,e){},qncB:function(t,n,e){var s=e("XKFU"),i=e("vhPU"),a=e("eeVq"),o=e("/e88"),r="["+o+"]",c=RegExp("^"+r+r+"*"),u=RegExp(r+r+"*$"),l=function(t,n,e){var i={},r=a((function(){return!!o[t]()||"​"!="​"[t]()})),c=i[t]=r?n(m):o[t];e&&(i[e]=c),s(s.P+s.F*r,"String",i)},m=l.trim=function(t,n){return t=String(i(t)),1&n&&(t=t.replace(c,"")),2&n&&(t=t.replace(u,"")),t};t.exports=l},sV1t:function(t,n,e){"use strict";e.d(n,"a",(function(){return u})),e.d(n,"b",(function(){return h}));e("Tze0"),e("rE2o"),e("ioFf"),e("rGqo"),e("yt8O"),e("f3/d");function s(t){if(!/^[a-zA-Z][\w]{4,11}$/.test(t))throw new Error("用户名需为 5－12 个大小写字母、数字、下划线(_)组成！")}function i(t){if(!/^[\w]+@[\w]+\.[\w]+$/.test(t))throw new Error("邮箱格式有误！")}function a(t){if(""===t.name)throw new Error("需选择头像！")}function o(t){if(!/^[\w]{6,20}$/.test(t))throw new Error("用户密码需为 6－20 个大小写字母、数字、下划线(_)、英文句号(.)组成！")}function r(t){if(t.get("password")===t.get("newpassword"))throw new Error("新密码不能与旧密码相同!")}function c(t){if(t.get("password")!==t.get("confirmpassword"))throw new Error("两次密码输入不一致！")}function u(t){var n=t.entries();try{var e=!0,u=!1,l=void 0;try{for(var m,f=n[Symbol.iterator]();!(e=(m=f.next()).done);e=!0){var h=m.value;switch(h[0]){case"name":s(h[1]);break;case"email":i(h[1]);break;case"avatar":a(h[1]);break;case"password":o(h[1]);break;case"newpassword":r(t);break;case"confirmpassword":c(t)}}}catch(t){u=!0,l=t}finally{try{e||null==f.return||f.return()}finally{if(u)throw l}}}catch(t){return t}}function l(t){if(t.trim().length<6)throw new Error("文章标题至少6个字符以上")}function m(t){if(!/^[\w]*$/.test(t))throw new Error("命名链接只能包含字母、数字及下划线")}function f(t){if(t.trim().length<10)throw new Error("文章内容至少10个字符以上")}function h(t){var n=t.entries();try{var e=!0,s=!1,i=void 0;try{for(var a,o=n[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var r=a.value;switch(r[0]){case"title":l(r[1]);break;case"namedLink":m(r[1]);break;case"content":f(r[1])}}}catch(t){s=!0,i=t}finally{try{e||null==o.return||o.return()}finally{if(s)throw i}}}catch(t){return t}}}}]);